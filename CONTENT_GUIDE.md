# Content Guide (how to add posts, images, and items)

This site is **static** (GitHub Pages). You edit JSON + Markdown files, push to GitHub, and the site updates.

---

## 1) Change the background photo (global)

Replace this file with your own photo (same filename):
- `assets/images/bg.jpg`

Tips:
- Use **1920×1080** (or bigger), JPG.
- Keep it under ~500KB if possible.

---

## 2) Add / replace images

Put images here:
- `assets/images/`

Recommended sizes:
- Covers: **1280×720** (16:9), JPG/WEBP.
- Small thumbnails: **900×600** is also fine.

Use an image inside a post (Markdown):
```md
![Alt text](assets/images/my-photo.jpg)
```

---

## 3) Add a Life article (blog post)

### Step A — create the Markdown
Create:
- `posts/my-new-article.md`

Use this simple structure:
```md
# My title

Intro paragraph.

## Section
Text...
```

### Step B — add it to the list (so it appears on the website)
Edit:
- `data/articles.json`

Add an object inside `"articles": [...]`

Minimal fields:
- `slug` (same as filename, without `.md`)
- `title`
- `date` (`YYYY-MM-DD`)
- `category` (example: `"Life"`)
- `tags` (array)
- `description` (shown under the title)
- `cover` (image path)

Example:
```json
{
  "slug": "my-new-article",
  "title": "Cost of living in San Cristóbal (real numbers)",
  "date": "2026-01-30",
  "category": "Life",
  "tags": ["money","rent","food"],
  "description": "Quick reference costs for rent, food, transport and daily life.",
  "cover": "assets/images/cover_cost.jpg",
  "featured": true,
  "priority": 9
}
```

Notes:
- Higher `priority` shows higher in lists.
- Set `"featured": true` if you want it on the Home page featured list.

---

## 4) Add a Nature place (also opens as a Markdown post)

Nature is powered by:
- `data/places.json` (list)
- `posts/<slug>.md` (detail page)

Add a place object under `"places": [...]` with:
- `slug`, `title`, `description`, `cover`, `tags`
Optional:
- `distance` (example: `"20 min"`), `time` (example: `"Half day"`), `type` (example: `"Waterfall"`)

---

## 5) Add / edit Restaurants, Hotels, Music (detail pages)

These open via `item.html` and read JSON.

### Restaurants
File:
- `data/restaurants.json`

Fields you can use (any are optional):
- `id` (unique)
- `name`
- `description`
- `cover`
- `type` (cuisine/style)
- `price`
- `area`
- `address`
- `hours`
- `phone`
- `instagram`
- `map_url` (Google Maps link)
- `link` (website)
- `tags` (array)

### Hotels
File:
- `data/hotels.json`

Optional fields:
- `price_range` (or `price`)
- `vibe`
- `area`
- `address`
- `whatsapp`
- `phone`
- `booking_url`
- `map_url`
- `link`
- `tags`

### Music / Parties
File:
- `data/music.json`

Optional fields:
- `type` (bar/club/live)
- `best_day`
- `genre`
- `area`
- `address`
- `hours`
- `cover_charge`
- `instagram`
- `map_url`
- `link`
- `tags`

---

## 6) How to publish changes (GitHub Pages)

1) Open your repo on GitHub.
2) Upload the changed files (or drag & drop).
3) **Commit** to `main`.
4) Wait 1–2 minutes and refresh the site.

If CSS looks “old”, do a hard refresh:
- Windows: `Ctrl + Shift + R`
- Mac: `Cmd + Shift + R`

---

## 7) Community mode (Supabase): user accounts, posts, comments, ratings

This site now has an optional **community layer** powered by Supabase.

### A) One-time setup (you do this once)

1) Create a Supabase project.
2) Supabase → SQL Editor:
   - Run `sql/supabase_schema.sql`
   - Create a Storage bucket named `media` (make it **Public**)
   - Run `sql/storage_policies.sql`
3) Supabase → Project Settings → API:
   - Copy **Project URL** and **anon public key**
4) In your repo, edit:
   - `assets/supabase-config.js`
     - set `SUPABASE_URL`
     - set `SUPABASE_ANON_KEY`
5) Configure Auth redirect URLs (Supabase → Authentication → URL Configuration):
   - Add your GitHub Pages domain (and the exact path), example:
     - `https://YOURNAME.github.io/YOURREPO/account.html`

### B) How users publish content

- Users go to `account.html` and log in with email magic link.
- They fill **display name + phone**.
- Account becomes **Pending** until you approve.

After approval, users can:
- Create a post: `submit-post.html`
- Comment + rate any page that has the community widget (posts, items, events).

### C) Your moderation workflow

Open:
- `admin.html`

You can:
- Approve users (profiles)
- Approve posts
- Approve comments
- Approve ratings

### D) Images for community posts

When creating a post you can:
- Paste a direct image URL, **or**
- Upload an image file (stored in Supabase Storage bucket `media` under `media/<your-user-id>/...`)

### E) Content IDs used for comments/ratings

The site uses these `content_ref` values behind the scenes:
- Legacy blog posts (Markdown): `legacy:post:<slug>`
- Items (restaurants/hotels/music): `item:<type>:<id>`
- Events: `event:<id>`
- Supabase community posts: `post:<uuid>`

You don’t need to edit this manually; it’s auto-generated by the page.

---

## Next step ideas (when you’re ready)

- Add a **Business profile** type (separate profile template + verification)
- Add **AI translation** pipeline (store translations per language, auto-generate ES/DE/FR/NL)
- Add **forum** (topics + replies + moderation)
- Add **paid placements** (featured cards, sponsored sections)
